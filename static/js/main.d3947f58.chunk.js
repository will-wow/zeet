(this.webpackJsonpzeet=this.webpackJsonpzeet||[]).push([[0],{23:function(e,t,i){e.exports=i(84)},79:function(e,t){},80:function(e,t){},81:function(e,t){},84:function(e,t,i){"use strict";i.r(t);var n=i(2),r=i.n(n),a=i(16),s=i.n(a);i(28),i(69),i(70),i(71);AFRAME.registerComponent("world-tracking-hack",{init:function(){var e,t,i,n=this;null===(e=null===(t=this.el.sceneEl)||void 0===t||null===(i=t.renderer)||void 0===i?void 0:i.xr)||void 0===e||e.addEventListener("sessionstart",(function(){var e,t=null===(e=n.el.sceneEl)||void 0===e?void 0:e.renderer.xr.getSession();t.updateWorldTrackingState||(t.updateWorldTrackingState=function(){})}))}});AFRAME.registerComponent("mark-mover",{schema:{mark:{type:"selector"}},events:{"raycaster-intersection":function(e){this.data.mark.setAttribute("color","green")},"raycaster-intersection-cleared":function(){this.data.mark.setAttribute("color","red")}}});AFRAME.registerComponent("raycaster-move",{schema:{target:{type:"selector"}},events:{"raycaster-intersected":function(e){this.raycaster=e.detail.el},"raycaster-intersected-cleared":function(){this.raycaster=null}},tick:function(){if(this.raycaster){var e=this.raycaster.components.raycaster.getIntersection(this.el);e&&this.data.target.setAttribute("position",e.point)}}});var o={schema:{mark:{type:"selector"},object:{type:"selector"},camera:{type:"selector"},shadowPlane:{type:"selector"}},init:function(){var e=this;window.addEventListener("click",(function(){var t;(null===(t=e.el.sceneEl)||void 0===t?void 0:t.is("ar-mode"))&&e.placeObject()}))},placeObject:function(){var e=this.data.mark.getAttribute("position"),t=e.x,i=e.y,n=e.z;this.data.object.object3D.position.set(t,i,n),this.data.shadowPlane.object3D.position.set(t,i,n);var r=this.data.camera.getAttribute("position"),a=r.x,s=r.z;this.data.object.object3D.lookAt(a,i,s),this.data.object.setAttribute("visible",!0)}};AFRAME.registerComponent("place-on-click",o);var c=i(22),l={schema:{opacity:{type:"number",default:.3}},init:function(){var e,t;this.exitVr=this.exitVr.bind(this),this.enterVr=this.enterVr.bind(this),null===(e=this.el.sceneEl)||void 0===e||e.addEventListener("enter-vr",this.enterVr),null===(t=this.el.sceneEl)||void 0===t||t.addEventListener("exit-vr",this.exitVr)},remove:function(){var e,t;null===(e=this.el.sceneEl)||void 0===e||e.removeEventListener("enter-vr",this.enterVr),null===(t=this.el.sceneEl)||void 0===t||t.removeEventListener("exit-vr",this.exitVr)},enterVr:function(){var e;if(this.wasVisible=this.el.getAttribute("visible"),null===(e=this.el.sceneEl)||void 0===e?void 0:e.is("ar-mode")){var t=this.el.object3D.children[0];this.savedMaterial=t.material,t.material=new c.a,t.material.opacity=this.data.opacity,this.el.setAttribute("visible",!0)}},exitVr:function(){this.savedMaterial&&(this.el.object3D.children[0].material=this.savedMaterial,this.savedMaterial=null);this.wasVisible||this.el.setAttribute("visible",!1)}};AFRAME.registerComponent("ar-shadows",l);AFRAME.registerComponent("hide-in-ar-mode",{schema:{ar:{type:"boolean",default:!1},vr:{type:"boolean",default:!1}},init:function(){var e,t;this.exitVr=this.exitVr.bind(this),this.enterVr=this.enterVr.bind(this),null===(e=this.el.sceneEl)||void 0===e||e.addEventListener("enter-vr",this.enterVr),null===(t=this.el.sceneEl)||void 0===t||t.addEventListener("exit-vr",this.exitVr)},remove:function(){var e,t;null===(e=this.el.sceneEl)||void 0===e||e.removeEventListener("enter-vr",this.enterVr),null===(t=this.el.sceneEl)||void 0===t||t.removeEventListener("exit-vr",this.exitVr)},enterVr:function(){var e;this.wasVisible=this.el.getAttribute("visible"),(null===(e=this.el.sceneEl)||void 0===e?void 0:e.is("ar-mode"))&&this.el.setAttribute("visible",!1)},exitVr:function(){this.wasVisible&&this.el.setAttribute("visible",!0)}});var d=i(3),u=i.n(d),h=i(10),v=i(6),m="".concat("","/assets/models"),p=new v.a,f={schema:{object:{type:"selector"},hud:{type:"selector"}},init:function(){var e=this;this.setExpression=this.setExpression.bind(this);var t=document.querySelector("#video");Promise.all([b(),y(t)]).then((function(){e.data.object.setAttribute("visible",!0),e.data.hud.setAttribute("value","move phone from side to side"),E(t).then(e.setExpression),setInterval((function(){return E(t).then(e.setExpression)}),1e3)}))},setExpression:function(e){var t="happy"===e?"Wave":"Idle";this.data.object.setAttribute("animation-mixer",{clip:t})}},b=function(){var e=Object(h.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all([v.c.tinyFaceDetector.loadFromUri(m),v.c.faceExpressionNet.loadFromUri(m)]);case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){var e=Object(h.a)(u.a.mark((function e(t){var i,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.b(t,p).withFaceExpressions();case 2:return i=e.sent,n=null===i||void 0===i?void 0:i.expressions.asSortedArray()[0],e.abrupt("return",(null===n||void 0===n?void 0:n.expression)||null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y=function(){var e=Object(h.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.mediaDevices.getUserMedia({video:{facingMode:"user"}}).then((function(e){return t.srcObject=e,"connected"}));case 2:return e.abrupt("return",new Promise((function(e){t.addEventListener("loadeddata",(function(){return e()}))})));case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();AFRAME.registerComponent("face-api",f);var g=i(17),w=i(4),x=i(18),k="".concat("","/assets/zeet/zeet.gltf"),A=function(){return r.a.createElement("a-assets",null,r.a.createElement("a-asset-item",{id:"zeet",src:k}))};function j(){var e=Object(g.a)(["\n  body {\n    font-family: 'Open Sans', sans-serif;\n  }\n"]);return j=function(){return e},e}var V=Object(x.a)(j()),M=function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(V,null),r.a.createElement("video",{id:"video",autoPlay:!0,muted:!0,playsInline:!0,style:{position:"fixed",zIndex:-1}}),r.a.createElement(w.Scene,{"world-tracking-hack":!0,ar:"worldSensing: true","raycaster-move":"target:#mark","place-on-click":"mark: #mark; object: #object; shadowPlane: #shadow-plane; camera: #camera","face-api":"object: #object; hud: #hud"},r.a.createElement(A,null),r.a.createElement(w.Entity,{id:"raycaster","ar-raycaster":"",raycaster:"objects: none","mark-mover":"mark: #mark"}),r.a.createElement("a-ring",{id:"mark",rotation:"-90 0 0","radius-inner":"0.01","radius-outer":"0.02"}),r.a.createElement(w.Entity,{id:"object",position:"0 0 -2","gltf-model":"#zeet","animation-mixer":"clip: Idle",shadow:"receive: false; cast: true",visible:"false"}),r.a.createElement(w.Entity,{id:"shadow-plane",geometry:"primitive: plane; height: 1; width: 1",rotation:"-90 0 0",shadow:"receive: true; cast: false","ar-shadows":"opacity: 0.3",visible:"false"}),r.a.createElement(w.Entity,{id:"ambient-light",light:"type: ambient; intensity: 0.5;"}),r.a.createElement("a-light",{id:"directional-light",type:"directional",light:"castShadow: true; shadowMapHeight: 1024; shadowMapWidth: 1024; shadowCameraLeft: -7; shadowCameraRight: 5; shadowCameraBottom: -5; shadowCameraTop: 5;",target:"dino",position:"-5 3 1.5"}),r.a.createElement(w.Entity,{id:"environment",environment:"preset: forest; lighting: none; shadow: none; lightPosition: 0 2.15 0","hide-in-ar-mode":!0}),r.a.createElement("a-camera",{id:"camera"},r.a.createElement("a-text",{id:"hud",align:"center","wrap-count":"800",position:"0 -0.1 -0.25",value:"loading..."}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(M,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[23,1,2]]]);
//# sourceMappingURL=main.d3947f58.chunk.js.map